
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

    <title>Building docs on GitHub &#8212; Documentation template  documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/alabaster.css" />
    <link rel="stylesheet" type="text/css" href="_static/graphviz.css" />
    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="_static/doctools.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="prev" title="Doctests" href="doctests.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
              <div class="related top">
                &nbsp;
  <nav id="rellinks">
    <ul>
        <li>
          &larr;
          <a href="doctests.html" title="Previous document">Doctests</a>
        </li>
    </ul>
  </nav>
              </div>
          

          <div class="body" role="main">
            
  <section id="building-docs-on-github">
<h1>Building docs on GitHub<a class="headerlink" href="#building-docs-on-github" title="Permalink to this heading">¶</a></h1>
<p>To host on GitHub Pages, you configuring the settings in the project
(<span class="guilabel">Settings -&gt; Pages -&gt; Source branch</span>) to a branch. Thereafter, any
content in that branch is automatically hosted at
<code class="docutils literal notranslate"><span class="pre">https://&lt;user&gt;.github.io/&lt;project&gt;</span></code>.</p>
<p>A common pattern is to maintain a separate branch called <code class="docutils literal notranslate"><span class="pre">gh-pages</span></code>, and keep
it completely cleaned out except for the built HTML documentation (with
<code class="file docutils literal notranslate"><span class="pre">index.html</span></code> as the top level).</p>
<p>This template documentation uses GitHub Actions to build the docs and push to
<code class="docutils literal notranslate"><span class="pre">gh-pages</span></code>. If you’re going to be using the GitHub Actions config, you’ll need
to create that branch manually first:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Assuming there&#39;s nothing in your repo yet.</span>
git checkout -b gh-pages

<span class="c1"># If you have anything commited, use `git rm *` to completely</span>
<span class="c1"># clean out this branch.</span>

<span class="c1"># Then assuming your remote is on GitHub</span>
git push origin gh-pages

<span class="c1"># Get back to the main branch</span>
git checkout main
</pre></div>
</div>
<p>This repo uses GitHub Actions to set up an environment, build the docs, and add
to the <code class="docutils literal notranslate"><span class="pre">gh-pages</span></code> branch, which is automatically served at the URL
<code class="docutils literal notranslate"><span class="pre">https://&lt;user&gt;.github.io/&lt;project&gt;</span></code>, which in this case is
<a class="reference external" href="https://nichd-bspc.github.io/documentation-template">https://nichd-bspc.github.io/documentation-template</a>.</p>
<p>The configuration is in <code class="file docutils literal notranslate"><span class="pre">.github/workflows/main.yml</span></code>. It’s generic, so as
long as you use <code class="docutils literal notranslate"><span class="pre">gh-pages</span></code> and have the source directory separate from build,
it should work.</p>
<p>This GitHub Actions configuration will:</p>
<ul class="simple">
<li><p>install conda and any dependencies in <code class="file docutils literal notranslate"><span class="pre">requirements.txt</span></code></p></li>
<li><p>run doctests</p></li>
<li><p>build the docs</p></li>
<li><p>commit them to the <cite>gh-pages</cite> branch</p></li>
<li><p>upload them as an artifact in the Actions web interface so you can inspect</p></li>
</ul>
<p>From the <span class="guilabel">Actions</span> tab of the GitHub interface, you can click on a job
and look for the <span class="guilabel">Artifacts</span> section to download the built docs. This
can be nice for contributors to see the results of their changes without needing
to set everything up locally.</p>
<p>It will do those steps on every push. If we’re on the <cite>main</cite> branch, then the
docs will also be pushed to the <cite>gh-pages</cite> branch, at which time they will be
publicly available at <cite>https://&lt;user&gt;.github.io/&lt;project&gt;</cite>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Note that GitHub by default expects pages generated by <a class="reference external" href="https://jekyllrb.com/docs/">Jekyll</a>. You need to add a file at the top level
of your repo, <code class="file docutils literal notranslate"><span class="pre">.nojekyll</span></code>, to tell GitHub to not expect
Jekyll-generated docs. The GitHub Actions for this repo take care of
this.</p>
</div>
<section id="github-workflows-main-yml">
<h2><code class="docutils literal notranslate"><span class="pre">.github/workflows/main.yml</span></code><a class="headerlink" href="#github-workflows-main-yml" title="Permalink to this heading">¶</a></h2>
<p>You can find the configuration in this repository under
<code class="file docutils literal notranslate"><span class="pre">.github/workflows/main.yml</span></code>, and it is included directly in this
documentation here:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="c1"># This GitHub Actions configuration will install conda, run doctests, build the</span><span class="w"></span>
<span class="linenos"> 2</span><span class="c1"># docs, commit them to the gh-pages branch, upload them as an artifact so you</span><span class="w"></span>
<span class="linenos"> 3</span><span class="c1"># can inspect. It will do this on every push. If we&#39;re on the `main` branch,</span><span class="w"></span>
<span class="linenos"> 4</span><span class="c1"># then the docs will be pushed to the gh-pages branch, at which time they will</span><span class="w"></span>
<span class="linenos"> 5</span><span class="c1"># be publicly available at https://&lt;user&gt;.github.io/&lt;project&gt;.</span><span class="w"></span>
<span class="linenos"> 6</span><span class="c1">#</span><span class="w"></span>
<span class="linenos"> 7</span><span class="c1"># Note: there are actions that can be used to wrap up some of this</span><span class="w"></span>
<span class="linenos"> 8</span><span class="c1"># configuration. But I find it more useful to do thing the &quot;long way&quot; because</span><span class="w"></span>
<span class="linenos"> 9</span><span class="c1"># it&#39;s easier to customize later when needed.</span><span class="w"></span>
<span class="linenos">10</span>
<span class="linenos">11</span>
<span class="linenos">12</span><span class="c1"># This name will show up in the Actions interface.</span><span class="w"></span>
<span class="linenos">13</span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">main</span><span class="w"></span>
<span class="linenos">14</span>
<span class="linenos">15</span><span class="c1"># Run everything here on every push to the repo.</span><span class="w"></span>
<span class="linenos">16</span><span class="nt">on</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">push</span><span class="p p-Indicator">]</span><span class="w"></span>
<span class="linenos">17</span>
<span class="linenos">18</span><span class="nt">jobs</span><span class="p">:</span><span class="w"></span>
<span class="linenos">19</span>
<span class="linenos">20</span><span class="w">  </span><span class="nt">build-and-test</span><span class="p">:</span><span class="w"></span>
<span class="linenos">21</span>
<span class="linenos">22</span><span class="w">    </span><span class="c1"># This is the base image we&#39;ll be using. It&#39;s Ubuntu plus conveniently</span><span class="w"></span>
<span class="linenos">23</span><span class="w">    </span><span class="c1"># installed extras like conda.</span><span class="w"></span>
<span class="linenos">24</span><span class="w">    </span><span class="nt">runs-on</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;ubuntu-latest&quot;</span><span class="w"></span>
<span class="linenos">25</span><span class="w">    </span><span class="nt">steps</span><span class="p">:</span><span class="w"></span>
<span class="linenos">26</span>
<span class="linenos">27</span><span class="w">    </span><span class="c1"># All our steps will need the code, so we use this action to check out our</span><span class="w"></span>
<span class="linenos">28</span><span class="w">    </span><span class="c1"># repo for us</span><span class="w"></span>
<span class="linenos">29</span><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">uses</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">actions/checkout@v2</span><span class="w"></span>
<span class="linenos">30</span>
<span class="linenos">31</span><span class="w">    </span><span class="c1"># Set up conda environment for subsequent jobs. If you need other packages,</span><span class="w"></span>
<span class="linenos">32</span><span class="w">    </span><span class="c1"># add them to requirements.txt</span><span class="w"></span>
<span class="linenos">33</span><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">build env</span><span class="w"></span>
<span class="linenos">34</span><span class="w">      </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">|</span><span class="w">  </span><span class="c1"># Note the &quot;|&quot; which indicates &quot;a multiline string follows&quot;</span><span class="w"></span>
<span class="linenos">35</span>
<span class="linenos">36</span><span class="w">        </span><span class="no"># The base GitHub Ubuntu image has conda already installed.</span><span class="w"></span>
<span class="linenos">37</span><span class="w">        </span><span class="no"># The eval call does the equivalent of &quot;conda init bash&quot; and we will</span><span class="w"></span>
<span class="linenos">38</span><span class="w">        </span><span class="no"># use it at the beginning of subsequent steps that need to use conda.</span><span class="w"></span>
<span class="linenos">39</span><span class="w">        </span><span class="no">eval &quot;$(conda shell.bash hook)&quot;</span><span class="w"></span>
<span class="linenos">40</span><span class="w">        </span><span class="no">conda create -p ./env --file requirements.txt --channel conda-forge</span><span class="w"></span>
<span class="linenos">41</span>
<span class="linenos">42</span><span class="w">    </span><span class="c1"># Run doctests (delete this if you are not using doctests)</span><span class="w"></span>
<span class="linenos">43</span><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">run doctests</span><span class="w"></span>
<span class="linenos">44</span><span class="w">      </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">|</span><span class="w"></span>
<span class="linenos">45</span><span class="w">        </span><span class="no">eval &quot;$(conda shell.bash hook)&quot;</span><span class="w"></span>
<span class="linenos">46</span><span class="w">        </span><span class="no">conda activate ./env</span><span class="w"></span>
<span class="linenos">47</span><span class="w">        </span><span class="no">(cd doc &amp;&amp; make doctest)</span><span class="w"></span>
<span class="linenos">48</span>
<span class="linenos">49</span><span class="w">    </span><span class="c1"># Build docs here, and copy them over to a temp directory that is a clone</span><span class="w"></span>
<span class="linenos">50</span><span class="w">    </span><span class="c1"># of the gh-pages branch.</span><span class="w"></span>
<span class="linenos">51</span><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">build docs</span><span class="w"></span>
<span class="linenos">52</span><span class="w">      </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">|</span><span class="w"></span>
<span class="linenos">53</span><span class="w">        </span><span class="no"># Activate env and build docs</span><span class="w"></span>
<span class="linenos">54</span><span class="w">        </span><span class="no">eval &quot;$(conda shell.bash hook)&quot;</span><span class="w"></span>
<span class="linenos">55</span><span class="w">        </span><span class="no">conda activate ./env</span><span class="w"></span>
<span class="linenos">56</span><span class="w">        </span><span class="no">(cd doc &amp;&amp; make html)</span><span class="w"></span>
<span class="linenos">57</span>
<span class="linenos">58</span><span class="w">        </span><span class="no"># Clone just the gh-pages branch to a temp dir.</span><span class="w"></span>
<span class="linenos">59</span><span class="w">        </span><span class="no">git clone \</span><span class="w"></span>
<span class="linenos">60</span><span class="w">          </span><span class="no">--single-branch \</span><span class="w"></span>
<span class="linenos">61</span><span class="w">          </span><span class="no">--branch gh-pages &quot;https://x-access-token:${{ secrets.GITHUB_TOKEN }}@github.com/$GITHUB_REPOSITORY&quot; \</span><span class="w"></span>
<span class="linenos">62</span><span class="w">          </span><span class="no">/tmp/doc</span><span class="w"></span>
<span class="linenos">63</span>
<span class="linenos">64</span><span class="w">        </span><span class="no"># Clean out that temp dir because we&#39;re about to move our just-built</span><span class="w"></span>
<span class="linenos">65</span><span class="w">        </span><span class="no"># docs there</span><span class="w"></span>
<span class="linenos">66</span><span class="w">        </span><span class="no">rm -rf /tmp/doc/*</span><span class="w"></span>
<span class="linenos">67</span><span class="w">        </span><span class="no">cp -r doc/build/html/* /tmp/doc</span><span class="w"></span>
<span class="linenos">68</span>
<span class="linenos">69</span><span class="w">        </span><span class="no"># GitHub defaults to assuming Jekyll pages; the presence of this file</span><span class="w"></span>
<span class="linenos">70</span><span class="w">        </span><span class="no"># makes Sphinx pages work properly with GitHub</span><span class="w"></span>
<span class="linenos">71</span><span class="w">        </span><span class="no">touch /tmp/doc/.nojekyll</span><span class="w"></span>
<span class="linenos">72</span>
<span class="linenos">73</span><span class="w">    </span><span class="c1"># Upload the built docs as an artifact for inspection (even on PRs). This</span><span class="w"></span>
<span class="linenos">74</span><span class="w">    </span><span class="c1"># will show up in the Actions web interface.</span><span class="w"></span>
<span class="linenos">75</span><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">push artifact</span><span class="w"></span>
<span class="linenos">76</span><span class="w">      </span><span class="nt">uses</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">actions/upload-artifact@v2</span><span class="w"></span>
<span class="linenos">77</span><span class="w">      </span><span class="nt">with</span><span class="p">:</span><span class="w"></span>
<span class="linenos">78</span><span class="w">        </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">doc</span><span class="w"></span>
<span class="linenos">79</span><span class="w">        </span><span class="nt">path</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/tmp/doc</span><span class="w"></span>
<span class="linenos">80</span>
<span class="linenos">81</span><span class="w">    </span><span class="c1"># Push docs to gh-pages but ONLY if this test is running on master branch</span><span class="w"></span>
<span class="linenos">82</span><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">push docs to gh-pages branch</span><span class="w"></span>
<span class="linenos">83</span><span class="w">      </span><span class="nt">if</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">${{ (github.ref == &#39;refs/heads/main&#39;) }}</span><span class="w"></span>
<span class="linenos">84</span><span class="w">      </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">|</span><span class="w"></span>
<span class="linenos">85</span>
<span class="linenos">86</span><span class="w">        </span><span class="no"># Commit our changes to the gh-pages branch</span><span class="w"></span>
<span class="linenos">87</span><span class="w">        </span><span class="no">cd /tmp/doc</span><span class="w"></span>
<span class="linenos">88</span><span class="w">        </span><span class="no">git config --global user.email &quot;action@github.com&quot;</span><span class="w"></span>
<span class="linenos">89</span><span class="w">        </span><span class="no">git config --global user.name &quot;GitHub Action&quot;</span><span class="w"></span>
<span class="linenos">90</span><span class="w">        </span><span class="no">git add .</span><span class="w"></span>
<span class="linenos">91</span>
<span class="linenos">92</span><span class="w">        </span><span class="no"># git commit exits nonzero if nothing to commit, but we don&#39;t want to</span><span class="w"></span>
<span class="linenos">93</span><span class="w">        </span><span class="no"># consider that an error so we ignore it.</span><span class="w"></span>
<span class="linenos">94</span><span class="w">        </span><span class="no">git commit -m &#39;update docs&#39; -a || true</span><span class="w"></span>
<span class="linenos">95</span>
<span class="linenos">96</span><span class="w">        </span><span class="no"># Push the gh-pages branch. Once this happens, your changes will be</span><span class="w"></span>
<span class="linenos">97</span><span class="w">        </span><span class="no"># live (though could take a couple mins to show up)</span><span class="w"></span>
<span class="linenos">98</span><span class="w">        </span><span class="no">git push &quot;https://x-access-token:${{ secrets.GITHUB_TOKEN }}@github.com/$GITHUB_REPOSITORY&quot; gh-pages</span><span class="w"></span>
</pre></div>
</div>
</section>
</section>


          </div>
              <div class="related bottom">
                &nbsp;
  <nav id="rellinks">
    <ul>
        <li>
          &larr;
          <a href="doctests.html" title="Previous document">Doctests</a>
        </li>
    </ul>
  </nav>
              </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="index.html">Documentation template</a></h1>








<h3>Navigation</h3>
<p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="configuration.html">Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="typography.html">Formatting examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="doctests.html">Doctests</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Building docs on GitHub</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#github-workflows-main-yml"><code class="docutils literal notranslate"><span class="pre">.github/workflows/main.yml</span></code></a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="autoapi/index.html">API Reference</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
      <li>Previous: <a href="doctests.html" title="previous chapter">Doctests</a></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2022, Ryan Dale.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 5.1.1</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="_sources/github_setup.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>